# Документация по проект "Notes In The Cloud"
### от екип 6

---

`NotesInTheCloud` е цялостно решение за създаване, съхранение и управление на лични бележки в облачната среда. Проектът включва бекенд, разработен с помощта на Java и Spring Boot, както и фронтенд клиент, реализиран със съвременни JavaScript технологии. Целта е да се предостави лесен за използване и достъпен интерфейс, който позволява на потребителите да организират своите идеи, списъци и дневни записи по интуитивен начин.

## Основни характеристики

Проектът поддържа регистрация и автентикация на потребители, съхранение на бележки в релационна база данни, както и бърза и отзивчива клиентска част, която комуникира с RESTful API.

## Технология

За бекенд частта е избран Spring Boot, което осигурява бърза конфигурация и богата екосистема от зависимости. За базата данни се използва Maria DB, чиято връзка се управлява чрез Spring Data JPA. Фронтендът е реализиран на базата на React, което дава възможност за динамично зареждане на данни и рендериране на компоненти.

---
## Дизайн на базата данни

**Колекция users:**
Съхранява информация за потребителите:

- `id`: Идентификатор на потребителя.

- `email`: Имейл адрес (използван за вход).

- `username`: Потребителско име.

- `password_hash`: Хеширана парола (bcrypt).

- `created_at`: Дата и час на регистрация.

- `last_login_at`: Дата и час на последно влизане.

**Колекция notes:**
Всяка бележка има следните полета:

- `id`: Идентификатор на бележката.

- `owner_id`: Идентификатор на създателя (външен ключ към `users(id)`).

- `title`: Заглавие (низ).

- `content`: Съдържание (дълъг текст).

- `created_at`: Дата и час на създаване.

- `updated_at`: Дата и час на последна промяна.

**Колекция note_shares:**
Държи информация за споделени бележки, а именно:

- `id`: Идентификатор на споделянето.

- `note_id`: Идентификатор на споделената бележка.

- `shared_with_id`: Идентификатор на потребителя, с когото е споделена бележката.

- `perm`: Правата, с които разполага потребителя, с когото е споделена бележката.

- `created_at`: Дата и час на споделяне на бележката.

- `confirm_token`: Токен за потвърждение на споделянето.

-`confirmed`: Флаг, показващ дали споделянето е потвърдено.

- UNIQUE (`note_id`, `shared_with_id`): Гарантира, че една бележка не може да бъде споделена с един и същ потребител повече от веднъж.

**Колекция todo_items:**
Държи информация за задачи в списък, а именно:

- `id`: Идентификатор на задачата.

- `creator_id`: Идентификатор на потребителя, създал задачата.

- `text`: Описание на задачата.

- `is_done`: Флаг, показващ дали задачата е завършена.

**Колекция reminders:**
Държи информация за напомняния, а именно:

- `id`: Идентификатор на напомнянето.

- `todo_id`: Идентификатор на задачата, за която е предназначено напомнянето (външен ключ към `todo_items(id)`).

- `creator_id`: Идентификатор на потребителя, създал напомнянето.

- `remind_at`: Дата и час на изпращане на напомнянето.

- `is_sent`: Флаг, показващ дали напомняето е изпратено.

**Колекция notifications:**
Държи информация за известия, а именно:

- `id`: Идентификатор на известието.

- `user_id`: Идентификатор на потребителя, за когото е предназначено известието.

- `reminder_id`: Идентификатор на напомнянето, с което е свързано изнестието.

- `sent_at`: Дата и час на изпращане на изнеситието.

**Таблица refresh_tokens:**
Токени за подновяване на сесия
Съхранява валидни токени за удължаване на сесията:

- `id`: Уникален идентификатор.

- `token`: Уникален стринг (до 64 символа).

- `expiry_date`: Дата на изтичане.

- `user_id`: Потребител, на когото принадлежи токенът.

**Индекси:**
Добавени индекси за подобряване на бързодействието при заявки:

- `users`: `username`

- `notes`: `owner_id`

- `note_shares`: `shared_with_id`

- `todo_items`: `creator_id`

- `reminders`: `todo_id`, `remind_at`, `is_sent`

- `notifications`: `user_id`, `sent_at`

- `refresh_tokens`: `token` (уникален)

---
## Backend
**Spring Boot** е основната технология, използвана за разработка на бекенд частта на приложението. Тя осигурява бърза конфигурация и интеграция с различни библиотеки и инструменти.

**Spring Boot Starter Web** е основният модул, който осигурява необходимите зависимости за разработка на уеб приложения. Той включва библиотеки за работа с HTTP заявки, RESTful API и други уеб технологии.

**Spring Boot Starter Data JPA** е модул, който осигурява необходимите зависимости за работа с релационни бази данни. Той включва библиотеки за работа с JPA (Java Persistence API) и Hibernate, което позволява лесно управление на CRUD операции и автоматично генериране на SQL заявки.

**Spring Boot Starter Security** е модул, който осигурява необходимите зависимости за работа с Spring Security. Той включва библиотеки за управление на автентикация и авторизация, което гарантира, че само упълномощени потребители могат да достъпват определени ресурси.

**Spring Boot Starter Mail** е модул, който осигурява необходимите зависимости за работа с имейл услуги. Той включва библиотеки за изпращане на имейли, което позволява на приложението да изпраща известия и напомняния на потребителите.

**Spring Boot Starter Validation** е модул, който осигурява необходимите зависимости за работа с валидация на данни. Той включва библиотеки за проверка на входните данни, което гарантира, че данните, които потребителите въвеждат, са валидни и отговарят на определени изисквания.

**Spring Boot Starter Test** е модул, който осигурява необходимите зависимости за работа с тестове. Той включва библиотеки за писане на тестове, което гарантира, че приложението работи правилно и отговаря на изискванията.

---
## Frontend
Фронтендът на приложението **NotesInTheCloud** е създаден с цел да осигури интуитивен и отзивчив потребителски интерфейс, който комуникира с бекенд API-то по REST принцип. Той е изградена върху съвременни JavaScript технологии и следва принципите на компонентно базираното програмиране, за да гарантира лесна поддръжка и разширяемост.
Основните технологии, използвани за разработка на фронтенда, включват:
- **React**: Библиотека за изграждане на потребителски интерфейси, която позволява създаването на компоненти, които могат да бъдат многократно използвани и лесно управлявани.
- **React Router**: Библиотека за управление на маршрутизацията в приложението, която позволява навигация между различни компоненти и страници.
- **Axios**: Библиотека за работа с HTTP заявки, която позволява лесно изпращане на GET, POST, PUT и DELETE заявки към бекенд API-то.

### Архитектура и комуникация с API

Маршрутизацията се управлява чрез `react-router` с помощта на `createBrowserRouter`. Всеки маршрут е асоцииран със съответна страница и може да има loader, който предварително зарежда нужните данни.

**Пример:** страницата `/app/notes` използва loader, който извиква `fetchNotes(userId)` за зареждане на бележките. Подобен подход се прилага и за задачи (to-do).

Използват се локални състояния чрез куките `useState` и `useEffect`. Достъпът до защитени маршрути се контролира от компонента `ProtectedRoute`, който проверява дали има активен access token и пренасочва неаутентифицирани потребители към login страницата.

За HTTP заявки се използва предварително конфигуриран **Axios** екземпляр (api.js). Той автоматично добавя access token в `Authorization` заглавката и обработва грешки тип 401 чрез опит за рефреш на токена.
### Основни компоненти и изгледи

* **LoginForm** и **RegisterForm**: оформят формите за вход и регистрация, извършват валидация на потребителски данни и показват грешки.
* **NoteList**: показва списък с бележки (компоненти `NoteItem`) в списъчен формат.
* **NoteEditor**: предоставя изглед за четене и редактиране на конкретна бележка.
* **TodoList**: показва списък със задачи (компоненти `TodoItem`) в списъчен формат.
* **TodoEditor**: предоставя изглед за четене и редактиране на конкретна задача.
* **Header**: навигационно меню, от което можем да изберем дали искаме да създадем бележка или задача.

### Стилове и дизайн

Приложението използва CSS за стилизация. Основните стилове са изнесени в общи файлове.

Потребителският интерфейс е адаптивен и оптимизиран за устройства с различни резолюции. Грид-системата гарантира правилно подреждане на елементите, а анимации с средна продължителност до 200 ms подобряват усещането за интерактивност.

---
## Инсталация и първоначална настройка

Преди да започнете, се уверете, че на локалната ви машина са инсталирани:

1. Java Development Kit (JDK) версия 11 или по-нова.
2. Maven за управление на зависимости и билд на Java проекта.
3. Node.js и npm за стартиране на фронтенд средата.

След клониране на хранилището с командата:

```bash
git clone https://github.com/Stefcho1227/NotesInTheCloud.git
```

можете да пристъпите към конфигуриране.

### Стартиране на фронтенд клиента

Влезте в директорията `front-end` и инсталирайте зависимостите:

```bash
cd front-end
npm install
```

За локален development режим изпълнете:

```bash
npm run start
```

Това ще стартира клиентското приложение на адрес `http://localhost:3000`, което зарежда данни от бекенд API-то.

---
## Използване на приложението

След успешен старт на двата компонента, потребителите могат да се регистрират през предоставения интерфейс, да влизат с учётни данни и да добавят нови бележки. Интерфейсът поддържа редактиране и изтриване на вече създадени записки, както и визуално подреждане по дати и заглавия.

При всички заявки към API-то се използва JSON формат. Примерен POST към `/api/notes`:

```json
{
  "title": "Моята първа бележка",
  "content": "Текст на бележката..."
}
```
---
## Docker контейнеризация

Проектът **NotesInTheCloud** е напълно контейнеризиран с помощта на Docker и Docker Compose, което позволява лесно разгръщане и стартиране на всички основни компоненти – фронтенд, бекенд и база данни – в изолирана и консистентна среда.

### Стартиране

За да стартирате проекта чрез Docker, е необходимо само да изпълните една команда от главната директория:

```bash
docker compose up --build
```

Това автоматично:

* Сваля и стартира MariaDB база
* Изгражда Spring Boot приложението и го стартира
* Изгражда React приложението и го обслужва чрез вграден Node сървър или static файлове

### Сигурност и достъп

JWT токени се използват за автентикация между фронтенд и бекенд. Достъпът до базата данни е ограничен до локалната мрежа между контейнерите.

---
## Бъдещи подобрения
Проектът има потенциал за разширение с нови функционалности, като:
- Поддръжка на Markdown формат за бележки.
- Възможност за прикачване на файлове към бележки.
- Интеграция с външни услуги за синхронизация на бележки.
- Добавяне на push известия за напомняния и споделяне на бележки.
- Подобряване на потребителския интерфейс с нови компоненти и анимации.
- Оптимизация на производителността при работа с големи обеми данни.
- Добавяне на функционалност за филтриране на бележки и задачи.
- Интеграция с облачни услуги за бекъп и възстановяване на данни.
- Поддръжка на многоезичност и локализация на интерфейса.
- Добавяне на функционалност за импортиране и експортиране на бележки в различни формати (например PDF, TXT).
- Интеграция с AI услуги за автоматично генериране на бележки и напомняния.
- Добавяне на възможност за създаване на шаблони за бележки и задачи.
- Добавяне на възможност за интеграция с календарни приложения за синхронизиране на напомняния и събития.
- Разширяване на възможностите за персонализация на потребителския интерфейс (теми, шрифтове и т.н.).
- Добавяне на възможност за гласово въвеждане на бележки и задачи.
- Добавяне на функционалност за автоматично архивиране на стари бележки и задачи.

---
## Заключение
Проектът **NotesInTheCloud** предоставя цялостно решение за управление на бележки и задачи в облака, като съчетава мощен бекенд с интуитивен фронтенд интерфейс. Със своите разширени възможности за персонализация и бъдещи подобрения, той е идеален инструмент за всеки, който търси ефективно и удобно решение за организиране на личните си бележки и задачи.
